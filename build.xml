<?xml version="1.0" encoding="UTF-8" ?>
<!--Ant buildfile generated by Oracle JDeveloper-->
<!--Generated Sep 14, 2015 9:18:11 PM-->
<project name="nda" default="compile" basedir=".">


    <property environment="env"/>
    
    <property name="src" value="src"/>
    <!-- 请将这里的lib路径设置为您的本机的lib所在路径 -->
    <condition property="lib" value="${env.LIB_HOME}" else="/applications/libraries/web">
        <available file="${env.LIB_HOME}" type="dir"/>
    </condition>
    <condition property="catalina.home" value="${env.CATALINA_HOME}">
        <isset property="env.CATALINA_HOME"/>
    </condition>
    <property name="webapps" value="webapps"/>
    <condition property="createLink">
        <and>
            <os family="unix"/>
            <isset property="env.TMPDIR"/>
        </and>
    </condition>

    <!-- defines output files -->
    <property name="outdir" value="bin"/>
    <property name="outdir-classes" value="${webapps}/WEB-INF/classes"/>
    <property name="outwar" value="bin/${ant.project.name}.war"/>    

    <path id="project.classpath">
        <!-- libraries provided by web container -->
        <fileset dir="${lib}" includes="**/*.jar"/>

        <!-- Add any additional application libs -->
        <fileset dir="${webapps}/WEB-INF/lib" includes="**/*.jar"/>
        <pathelement location="${webapps}/WEB-INF/classes"/>
    </path>

    <!-- Create the output directories if they don't exist yet. -->
    <target name="dirs" depends="create_link">
        <echo>Creating output directories if needed...</echo>
        <mkdir dir="${outdir}"/>
        <mkdir dir="${outdir-classes}"/>
        <mkdir dir="${webapps}/WEB-INF/lib"/>
    </target>

    <target name="create_link" if="createLink">
        <mkdir dir="${env.TMPDIR}/bin"/>
        <symlink overwrite="true" link="${basedir}/${outdir}" resource="${env.TMPDIR}/bin"/>
    </target>

    <!-- Compile java files. -->
    <target name="compile" depends="dirs">
        <javac srcdir="${src}"
               destdir="${outdir-classes}"
               sourcepath=""
               source="1.5"
               target="1.5"
               debug="on"
               includeantruntime="false"
               encoding="UTF-8">
            <compilerarg line="-Xlint -Xlint:-serial -Xlint:-options"/>
            <classpath refid="project.classpath"/>
        </javac>
        <copy todir="${outdir-classes}">
            <fileset dir="${src}">
                <include name="**/*.properties"/>
                <include name="**/*.xml"/>
                <include name="**/*.xsl"/>
                <include name="**/*.xsd"/>
                <include name="**/*.png"/>
                <include name="**/*.jpg"/>
                <include name="**/*.gif"/>
            </fileset>
        </copy>
    </target>

    <target name="release" depends="war"/>

    <!-- Generate war file -->
    <target name="war" depends="compile">
        <zip destfile="${outwar}" basedir="${webapps}"/>
    </target>
</project>
